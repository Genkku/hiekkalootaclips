(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n,c,r,s=a(0),i=a.n(s),o=a(30),l=a.n(o),u=a(9),d=a(2),j=a(5),b=a(4),h=a.n(b),m=a(10),p=a(14),f=a.n(p);!function(e){e.channel="channel",e.category="category",e.subreddit="subreddit"}(n||(n={})),function(e){e.day="day",e.week="week",e.month="month",e.year="year",e.all="all"}(c||(c={})),function(e){e.new="new",e.top="top",e.hot="hot"}(r||(r={}));var O=function(){return JSON.parse(localStorage.getItem("favourites")||"[]").sort((function(e,t){return e.rank<t.rank?1:-1})).slice(0,15)},v=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,c,r,s,i,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.value||t.mode===n.subreddit){e.next=16;break}if(a=JSON.parse(localStorage.getItem("favourites")||"[]"),!((c=a.findIndex((function(e){return e.search.value===t.value&&e.search.mode===t.mode})))>=0)){e.next=8;break}(r=a)[c].rank=r[c].rank+1,e.next=15;break;case 8:return s="http://localhost:4000/api/twitch/suggestions/".concat(t.mode,"/").concat(t.value),e.next=11,f.a.get(s);case 11:i=e.sent,o=i.data,l=""!==o[0].avatar?o[0].avatar:"",r=a.concat({search:t,rank:0,avatar:l});case 15:localStorage.setItem("favourites",JSON.stringify(r));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(a(55),a(12)),g=(a(56),a(1)),y=function(e){var t=e.src,a=e.name,n=null===t||void 0===t?void 0:t.replace("{width}","50").replace("{height}","67").replace("300x300","50x50"),c="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png";return Object(g.jsxs)("div",{className:"channel-avatar-container",children:[Object(g.jsx)("img",{className:"channel-avatar",width:30,src:void 0!==n&&""!==n?n:c,alt:"".concat(a," avatar"),onError:function(e){return function(e){e.target.src=c}(e)}}),a]})},k={clips:{data:[],pagination:{cursor:""}},currentClip:{title:"",video_url:"",comments_url:""},clipIndex:-1,currentSearch:{mode:n.channel,value:"",timePeriod:c.all,sort:r.hot},favourites:[]},N=Object(s.createContext)([k,function(){return k}]),w=function(e){var t=e.reducer,a=e.children,n=Object(s.useReducer)(t,k),c=Object(j.a)(n,2),r=c[0],i=c[1];return Object(g.jsx)(N.Provider,{value:[r,i],children:a})},S=function(){return Object(s.useContext)(N)},C=a(3),P=function(e){return{type:"SET_CLIPS",payload:e}},E=function(e){return{type:"SET_CURRENT_CLIP",payload:e}},T=function(e){return{type:"SET_CLIP_INDEX",payload:e}},_=function(e){return{type:"UPDATE_CLIPS",payload:e}},I=function(e){return{type:"SET_FAVOURITES",payload:e}},R=function(){var e=S(),t=Object(j.a)(e,2),a=t[0].favourites,n=t[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],d=Object(s.useCallback)((function(){var e=O();n(I(e))}),[n]);Object(s.useEffect)((function(){d()}),[d]),Object(s.useEffect)((function(){var e;null===(e=document.querySelector("body"))||void 0===e||e.addEventListener("click",(function(e){var t;e.target.closest(".favourites-container")||(l(!1),null===(t=document.querySelector(".favourites-bar"))||void 0===t||t.scrollTo({top:0}))}))}),[]);var b=function(){var e;l(!1),null===(e=document.querySelector(".favourites-bar"))||void 0===e||e.scrollTo({top:0})},h=function(e){!function(e){var t=JSON.parse(localStorage.getItem("favourites")||"[]").filter((function(t){return t.search.value!==e.value||t.search.mode!==e.mode}));localStorage.setItem("favourites",JSON.stringify(t))}(e),d()};return Object(g.jsx)(g.Fragment,{children:a&&Object(g.jsx)("aside",{className:"favourites-bar ".concat(!0===o?"is-visible":""),children:Object(g.jsxs)("div",{className:"favourites-container",children:[Object(g.jsx)("h5",{className:"title-lg",children:Object(g.jsxs)(u.b,{to:"/",title:"Homepage",onClick:b,children:[Object(g.jsx)(x.d,{size:30,className:"sidebar-icon"}),Object(g.jsx)("span",{className:"title-text",children:"Homepage"})]})}),Object(g.jsxs)("button",{className:"title-lg",onClick:function(){return l(!o)},children:[Object(g.jsx)(x.c,{size:30,className:"sidebar-icon"}),Object(g.jsxs)("span",{className:"title-text",children:["Your",Object(g.jsx)("br",{})," Favourites"]})]}),a.length>0?Object(g.jsx)("ul",{className:"favourites-list",children:a.map((function(e){var t=e.search,a=e.avatar;return Object(g.jsxs)("li",{className:"favourites-item",children:[Object(g.jsx)(u.b,{to:"/".concat(t.mode,"/").concat(c.day,"/").concat(t.value),onClick:b,children:Object(g.jsx)(y,{src:a,name:t.value})}),Object(g.jsx)("button",{title:"Remove Favourite",onClick:function(){return h(t)},children:Object(g.jsx)(x.e,{size:14})})]},t.value)}))}):Object(g.jsx)("p",{className:"favourites-empty",children:"After you seach for clips your favorites will show up here"})]})})})},F=function(){var e=Object(m.a)(h.a.mark((function e(t,a){var c,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.mode===n.subreddit?"http://localhost:4000/api/".concat(t.mode,"/livestreamfail?timeperiod=").concat(t.timePeriod,"&sort=").concat(t.value):"http://localhost:4000/api/twitch/".concat(t.mode,"/").concat(t.value,"?timeperiod=").concat(t.timePeriod),a&&(c="".concat(c,"&after=").concat(a)),e.prev=2,e.next=5,f.a.get(c);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(2),i=e.t0.response,e.abrupt("return",{error:{status:i.status,message:i.statusText}});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(h.a.mark((function e(t,a){var c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===n.subreddit){e.next=10;break}return c="http://localhost:4000/api/twitch/suggestions/".concat(t,"/"),a&&(c="".concat(c).concat(a)),e.next=5,f.a.get(c);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=(a(63),function(e){var t=e.id,a=e.name,n=e.label,c=e.checked,r=e.value,s=e.onChange;return Object(g.jsxs)("div",{className:"radio-custom",children:[Object(g.jsx)("input",{id:t,type:"radio",name:a,checked:c,value:r,onChange:s}),Object(g.jsx)("label",{htmlFor:t,children:n})]})}),U=(a(64),a(29),a(65),function(e){var t=e.suggestions,a=e.localSearch;return Object(g.jsxs)("section",{className:"suggestions-container",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Suggestions"}),t.length>0?Object(g.jsx)("ul",{className:"suggestions-list",children:a.mode&&Object(g.jsx)(g.Fragment,{children:t.map((function(e){var t=e.avatar,n=e.name;return Object(g.jsx)("li",{className:"suggestions-item",children:Object(g.jsx)(u.b,{to:"/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(n),children:Object(g.jsx)(y,{src:t,name:n})})},n)}))})}):Object(g.jsx)("p",{className:"no-suggestions",children:"No suggestions found but you can still search using the button since not every user is in our database."})]})}),z=function(){var e=Object(s.useState)({mode:n.channel,value:"",timePeriod:c.week,sort:r.hot}),t=Object(j.a)(e,2),a=t[0],i=t[1],o=Object(s.useState)([]),l=Object(j.a)(o,2),u=l[0],b=l[1],p=Object(s.useState)([]),f=Object(j.a)(p,2),O=f[0],v=f[1],x=Object(s.useState)([]),y=Object(j.a)(x,2),k=y[0],N=y[1],w=Object(d.f)(),S=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.value.length>0&&a.mode!==n.subreddit)){e.next=7;break}return e.next=3,L(a.mode,a.value);case 3:(t=e.sent)&&b(t),e.next=25;break;case 7:if(a.mode!==n.channel){e.next=16;break}if(!(O.length>0)){e.next=12;break}b(O),e.next=16;break;case 12:return e.next=14,L(a.mode);case 14:(c=e.sent).length>0&&(b(c),v(c));case 16:if(a.mode!==n.category){e.next=25;break}if(!(k.length>0)){e.next=21;break}b(k),e.next=25;break;case 21:return e.next=23,L(a.mode);case 23:(r=e.sent).length>0&&(b(r),N(r));case 25:case"end":return e.stop()}}),e)}))),[k,O,a.mode,a.value]);Object(s.useEffect)((function(){S()}),[S]);var P=function(){var e=Object(m.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c=a.value,a.mode===n.subreddit&&(c=a.sort),w.push("/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{mode:t}))},T=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{timePeriod:t}))},_=function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget.value,i(Object(C.a)(Object(C.a)({},a),{},{value:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{sort:t}))};return Object(g.jsxs)("div",{className:"search-container",children:[Object(g.jsx)("h2",{className:"text-intro",children:"Watch the best Twitch Clips from your favourite content creators without interruptions"}),Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Search Clips by"}),Object(g.jsx)(A,{id:"searchType-channel",name:"search-type",label:"Channel",value:n.channel,onChange:E,checked:a.mode===n.channel}),Object(g.jsx)(A,{id:"searchType-category",name:"search-type",label:"Category/Game",value:n.category,onChange:E,checked:a.mode===n.category}),Object(g.jsx)(A,{id:"searchType-lsf",name:"search-type",label:"LiveStreamFail",value:n.subreddit,onChange:E,checked:a.mode===n.subreddit})]}),Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Filter by Time"}),Object(g.jsx)(A,{id:"timePeriod-day",name:"timePeriod",label:"Day",value:c.day,onChange:T,checked:a.timePeriod===c.day}),Object(g.jsx)(A,{id:"timePeriod-week",name:"timePeriod",label:"Week",value:c.week,onChange:T,checked:a.timePeriod===c.week}),Object(g.jsx)(A,{id:"timePeriod-month",name:"timePeriod",label:"Month",value:c.month,onChange:T,checked:a.timePeriod===c.month}),Object(g.jsx)(A,{id:"timePeriod-year",name:"timePeriod",label:"Year",value:c.year,onChange:T,checked:a.timePeriod===c.year}),Object(g.jsx)(A,{id:"timePeriod-all",name:"timePeriod",label:"All",value:c.all,onChange:T,checked:a.timePeriod===c.all})]}),a.mode===n.subreddit&&Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Sort by"}),Object(g.jsx)(A,{id:"sort-popular",name:"sort",label:"Popular Now",value:r.hot,onChange:I,checked:a.sort===r.hot}),Object(g.jsx)(A,{id:"sort-top",name:"sort",label:"Most Votes",value:r.top,onChange:I,checked:a.sort===r.top}),Object(g.jsx)(A,{id:"sort-new",name:"sort",label:"Most Recent",value:r.new,onChange:I,checked:a.sort===r.new})]}),a.mode!==n.subreddit&&Object(g.jsx)("input",{className:"input-main-search",type:"text",placeholder:a.mode===n.channel?"Insert the channel name":"Insert the category/game name",value:a.value,onChange:_}),Object(g.jsx)("button",{type:"submit",className:"button-generic",onClick:P,disabled:""===a.value&&a.mode!==n.subreddit,children:"Search"}),a.mode!==n.subreddit&&Object(g.jsx)(U,{suggestions:u,localSearch:a})]})]})},D=a.p+"static/media/logo-reddit.569e7461.svg",J=a(13),H=(a(66),a(67),function(e){var t=e.visible;return Object(g.jsx)("div",{className:"loader ".concat(t),children:"Loading..."})}),M=function(){var e=S(),t=Object(j.a)(e,2),a=t[0],n=a.clips,c=a.currentClip,r=a.clipIndex,i=a.currentSearch,o=t[1],l=Object(s.useState)("loading"),b=Object(j.a)(l,2),p=b[0],f=b[1],y=Object(s.useState)(!1),k=Object(j.a)(y,2),N=k[0],w=k[1],C=Object(s.useState)(!1),R=Object(j.a)(C,2),L=R[0],A=R[1],U=Object(d.g)();Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[U]),Object(s.useEffect)((function(){return f("loading"),function(){var e=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(T(0)),o({type:"SET_CURRENT_SEARCH",payload:U}),e.next=4,F(U);case 4:if(!("error"in(t=e.sent))){e.next=10;break}w(!0),f(""),e.next=18;break;case 10:return o(P(t)),o(E(t.data[0])),e.next=14,v(U);case 14:return e.next=16,O();case 16:a=e.sent,o(I(a));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){o(E({title:"",video_url:"",comments_url:""})),f("loading")}}),[o,U]);var z=Object(s.useCallback)((function(e){var t=n.data,a="prev"===e?r-1:r+1;t[r].video_url===t[a].video_url?z():a<=n.data.length&&(f("loading"),o(E(t[a])),o(T(a)))}),[r,n,o]),M=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.pagination.cursor,console.log("moreclips called"),""===t||L){e.next=9;break}return A(!0),console.log("loading clips"),e.next=7,F(i,t);case 7:"error"in(a=e.sent)?console.log(a.error):(o(_(a)),A(!1));case 9:case"end":return e.stop()}}),e)}))),[n.pagination.cursor,i,o,L]);return Object(s.useEffect)((function(){var e=n.data.length;e>0&&-1===r&&z(),e>0&&r+3>e&&M()}),[n,r,z,M]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"player-container",children:[c.video_url&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"video-controls",children:[Object(g.jsx)("h4",{className:"title-lg",children:c.title}),Object(g.jsxs)("div",{className:"right-container",children:[c.comments_url&&Object(g.jsx)("a",{className:"link-comments",href:"https://reddit.com".concat(c.comments_url),target:"_blank",rel:"noreferrer",title:"clip comments",children:Object(g.jsx)("img",{className:"",width:"25",src:D,alt:"reddit logo"})}),Object(g.jsxs)("button",{className:"btn-clips-control btn-left",onClick:function(){return z("prev")},disabled:r<=0,children:["Previous",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]}),Object(g.jsxs)("button",{className:"btn-clips-control btn-right",onClick:function(){return z()},disabled:n.data.length<=r+1,children:["Next",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]})]})]}),Object(g.jsx)("video",{className:p,src:c.video_url,autoPlay:!0,controls:!0,onEnded:function(){return z()},onLoadedData:function(){return f("")},onError:function(){return z()}})]}),N&&Object(g.jsxs)("div",{className:"error-container",children:[Object(g.jsx)(x.f,{size:48}),Object(g.jsxs)("p",{className:"error-description",children:["We couldn't find any clips for your Search.",Object(g.jsx)("br",{}),"The game/user might not exist or they might not have any clips in the selected period.",Object(g.jsx)("br",{})," Users that are currently suspended also have their clips disabled."]}),Object(g.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]}),Object(g.jsx)(H,{visible:p})]})})},q=(a(68),a(69),function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("h1",{className:"logo-main",children:Object(g.jsxs)(u.b,{to:"/",children:["Clips ",Object(g.jsx)(x.b,{size:36})," Autoplay"]})})})}),V=a(6);J.a.initialize("UA-200630534-1"),Object(V.a)().listen((function(e,t){J.a.pageview(e.pathname+e.search)}));var W=function(){return Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R,{}),Object(g.jsxs)("main",{className:"main-content",children:[Object(g.jsx)(q,{}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.a,{path:"/:mode/:timePeriod/:value?",children:Object(g.jsx)(M,{})}),Object(g.jsx)(d.a,{path:"/",children:Object(g.jsx)(z,{})})]})]})]})};l.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(w,{reducer:function(e,t){switch(t.type){case"SET_CLIPS":return Object(C.a)(Object(C.a)({},e),{},{clips:Object(C.a)({},t.payload)});case"SET_CURRENT_CLIP":return Object(C.a)(Object(C.a)({},e),{},{currentClip:Object(C.a)({},t.payload)});case"SET_CLIP_INDEX":return Object(C.a)(Object(C.a)({},e),{},{clipIndex:t.payload});case"UPDATE_CLIPS":var a=e.clips.data.concat(t.payload.data);return Object(C.a)(Object(C.a)({},e),{},{clips:{data:a,pagination:{cursor:t.payload.pagination.cursor}}});case"SET_CURRENT_SEARCH":return Object(C.a)(Object(C.a)({},e),{},{currentSearch:t.payload});case"SET_FAVOURITES":return Object(C.a)(Object(C.a)({},e),{},{favourites:t.payload});default:return e}},children:Object(g.jsx)(u.a,{children:Object(g.jsx)(W,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.82647ddc.chunk.js.map