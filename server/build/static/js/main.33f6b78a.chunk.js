(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n,c,r,s=a(0),i=a.n(s),o=a(30),l=a.n(o),u=a(8),d=a(18),j=a(2),b=a(5),h=a(4),m=a.n(h),p=a(10),O=a(13),v=a.n(O);!function(e){e.channel="channel",e.category="category",e.subreddit="subreddit"}(n||(n={})),function(e){e.day="day",e.week="week",e.month="month",e.year="year",e.all="all"}(c||(c={})),function(e){e.new="new",e.top="top",e.hot="hot"}(r||(r={}));var f=function(){return JSON.parse(localStorage.getItem("favourites")||"[]").sort((function(e,t){return e.rank<t.rank?1:-1})).slice(0,15)},x=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,c,r,s,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.value||t.mode===n.subreddit){e.next=16;break}if(a=JSON.parse(localStorage.getItem("favourites")||"[]"),!((c=a.findIndex((function(e){return e.search.value===t.value&&e.search.mode===t.mode})))>=0)){e.next=8;break}(r=a)[c].rank=r[c].rank+1,e.next=15;break;case 8:return s="http://localhost:4000/api/twitch/suggestions/".concat(t.mode,"/").concat(t.value),e.next=11,v.a.get(s);case 11:i=e.sent,o=i.data,l=""!==o[0].avatar?o[0].avatar:"",r=a.concat({search:t,rank:0,avatar:l});case 15:localStorage.setItem("favourites",JSON.stringify(r));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=(a(57),a(12)),y=(a(58),a(1)),k=function(e){var t=e.src,a=e.name,n=null===t||void 0===t?void 0:t.replace("{width}","50").replace("{height}","67").replace("300x300","50x50"),c="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png";return Object(y.jsxs)("div",{className:"channel-avatar-container",children:[Object(y.jsx)("img",{className:"channel-avatar",width:30,src:void 0!==n&&""!==n?n:c,alt:"".concat(a," avatar"),onError:function(e){return function(e){e.target.src=c}(e)}}),a]})},N={clips:{data:[],pagination:{cursor:""}},currentClip:{title:"",video_url:"",comments_url:""},clipIndex:-1,currentSearch:{mode:n.channel,value:"",timePeriod:c.all,sort:r.hot},favourites:[]},S=Object(s.createContext)([N,function(){return N}]),C=function(e){var t=e.reducer,a=e.children,n=Object(s.useReducer)(t,N),c=Object(b.a)(n,2),r=c[0],i=c[1];return Object(y.jsx)(S.Provider,{value:[r,i],children:a})},w=function(){return Object(s.useContext)(S)},P=a(3),E=function(e){return{type:"SET_CLIPS",payload:e}},T=function(e){return{type:"SET_CURRENT_CLIP",payload:e}},_=function(e){return{type:"SET_CLIP_INDEX",payload:e}},I=function(e){return{type:"UPDATE_CLIPS",payload:e}},R=function(e){return{type:"SET_FAVOURITES",payload:e}},F=function(){var e=w(),t=Object(b.a)(e,2),a=t[0].favourites,n=t[1],r=Object(s.useState)(!1),i=Object(b.a)(r,2),o=i[0],l=i[1],d=Object(s.useCallback)((function(){var e=f();n(R(e))}),[n]);Object(s.useEffect)((function(){d()}),[d]),Object(s.useEffect)((function(){var e;null===(e=document.querySelector("body"))||void 0===e||e.addEventListener("click",(function(e){var t;e.target.closest(".favourites-container")||(l(!1),null===(t=document.querySelector(".favourites-bar"))||void 0===t||t.scrollTo({top:0}))}))}),[]);var j=function(){var e;l(!1),null===(e=document.querySelector(".favourites-bar"))||void 0===e||e.scrollTo({top:0})},h=function(e){!function(e){var t=JSON.parse(localStorage.getItem("favourites")||"[]").filter((function(t){return t.search.value!==e.value||t.search.mode!==e.mode}));localStorage.setItem("favourites",JSON.stringify(t))}(e),d()};return Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsx)("aside",{className:"favourites-bar ".concat(!0===o?"is-visible":""),children:Object(y.jsxs)("div",{className:"favourites-container",children:[Object(y.jsx)("h5",{className:"title-lg",children:Object(y.jsxs)(u.b,{to:"/",title:"Homepage",onClick:j,children:[Object(y.jsx)(g.d,{size:30,className:"sidebar-icon"}),Object(y.jsx)("span",{className:"title-text",children:"Homepage"})]})}),Object(y.jsxs)("button",{className:"title-lg",onClick:function(){return l(!o)},children:[Object(y.jsx)(g.c,{size:30,className:"sidebar-icon"}),Object(y.jsxs)("span",{className:"title-text",children:["Your",Object(y.jsx)("br",{})," Favourites"]})]}),a.length>0?Object(y.jsx)("ul",{className:"favourites-list",children:a.map((function(e){var t=e.search,a=e.avatar;return Object(y.jsxs)("li",{className:"favourites-item",children:[Object(y.jsx)(u.b,{to:"/".concat(t.mode,"/").concat(c.day,"/").concat(t.value),onClick:j,children:Object(y.jsx)(k,{src:a,name:t.value})}),Object(y.jsx)("button",{title:"Remove Favourite",onClick:function(){return h(t)},children:Object(y.jsx)(g.e,{size:14})})]},t.value)}))}):Object(y.jsx)("p",{className:"favourites-empty",children:"After you seach for clips your favorites will show up here"})]})})})},L=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var c,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.mode===n.subreddit?"http://localhost:4000/api/".concat(t.mode,"/livestreamfail?timeperiod=").concat(t.timePeriod,"&sort=").concat(t.value):"http://localhost:4000/api/twitch/".concat(t.mode,"/").concat(t.value,"?timeperiod=").concat(t.timePeriod),a&&(c="".concat(c,"&after=").concat(a)),e.prev=2,e.next=5,v.a.get(c);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(2),i=e.t0.response,e.abrupt("return",{error:{status:i.status,message:i.statusText}});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var c,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===n.subreddit){e.next=10;break}return c="http://localhost:4000/api/twitch/suggestions/".concat(t,"/"),a&&(c="".concat(c).concat(a)),e.next=5,v.a.get(c);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=(a(63),function(e){var t=e.id,a=e.name,n=e.label,c=e.checked,r=e.value,s=e.onChange;return Object(y.jsxs)("div",{className:"radio-custom",children:[Object(y.jsx)("input",{id:t,type:"radio",name:a,checked:c,value:r,onChange:s}),Object(y.jsx)("label",{htmlFor:t,children:n})]})}),z=(a(64),a(29),a(65),function(e){var t=e.suggestions,a=e.localSearch;return Object(y.jsxs)("section",{className:"suggestions-container",children:[Object(y.jsx)("h2",{className:"title-lg",children:"Suggestions"}),t.length>0?Object(y.jsx)("ul",{className:"suggestions-list",children:a.mode&&Object(y.jsx)(y.Fragment,{children:t.map((function(e){var t=e.avatar,n=e.name;return Object(y.jsx)("li",{className:"suggestions-item",children:Object(y.jsx)(u.b,{to:"/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(n),children:Object(y.jsx)(k,{src:t,name:n})})},n)}))})}):Object(y.jsx)("p",{className:"no-suggestions",children:"No suggestions found but you can still search using the button since not every user is in our database."})]})}),D=function(){var e=Object(s.useState)({mode:n.channel,value:"",timePeriod:c.week,sort:r.hot}),t=Object(b.a)(e,2),a=t[0],i=t[1],o=Object(s.useState)([]),l=Object(b.a)(o,2),u=l[0],d=l[1],h=Object(s.useState)([]),O=Object(b.a)(h,2),v=O[0],f=O[1],x=Object(s.useState)([]),g=Object(b.a)(x,2),k=g[0],N=g[1],S=Object(j.f)(),C=Object(s.useCallback)(Object(p.a)(m.a.mark((function e(){var t,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.value.length>0&&a.mode!==n.subreddit)){e.next=7;break}return e.next=3,A(a.mode,a.value);case 3:(t=e.sent)&&d(t),e.next=25;break;case 7:if(a.mode!==n.channel){e.next=16;break}if(!(v.length>0)){e.next=12;break}d(v),e.next=16;break;case 12:return e.next=14,A(a.mode);case 14:(c=e.sent).length>0&&(d(c),f(c));case 16:if(a.mode!==n.category){e.next=25;break}if(!(k.length>0)){e.next=21;break}d(k),e.next=25;break;case 21:return e.next=23,A(a.mode);case 23:(r=e.sent).length>0&&(d(r),N(r));case 25:case"end":return e.stop()}}),e)}))),[k,v,a.mode,a.value]);Object(s.useEffect)((function(){C()}),[C]);var w=function(){var e=Object(p.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c=a.value,a.mode===n.subreddit&&(c=a.sort),S.push("/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.currentTarget.value;i(Object(P.a)(Object(P.a)({},a),{},{mode:t}))},T=function(e){var t=e.currentTarget.value;i(Object(P.a)(Object(P.a)({},a),{},{timePeriod:t}))},_=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget.value,i(Object(P.a)(Object(P.a)({},a),{},{value:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.currentTarget.value;i(Object(P.a)(Object(P.a)({},a),{},{sort:t}))};return Object(y.jsxs)("div",{className:"search-container",children:[Object(y.jsx)("h2",{className:"text-intro",children:"Watch the best Twitch Clips from your favourite content creators without interruptions"}),Object(y.jsxs)("form",{children:[Object(y.jsxs)("div",{className:"inputs-group",children:[Object(y.jsx)("h2",{className:"title-lg",children:"Search Clips by"}),Object(y.jsx)(U,{id:"searchType-channel",name:"search-type",label:"Channel",value:n.channel,onChange:E,checked:a.mode===n.channel}),Object(y.jsx)(U,{id:"searchType-category",name:"search-type",label:"Category/Game",value:n.category,onChange:E,checked:a.mode===n.category}),Object(y.jsx)(U,{id:"searchType-lsf",name:"search-type",label:"LiveStreamFail",value:n.subreddit,onChange:E,checked:a.mode===n.subreddit})]}),Object(y.jsxs)("div",{className:"inputs-group",children:[Object(y.jsx)("h2",{className:"title-lg",children:"Filter by Time"}),Object(y.jsx)(U,{id:"timePeriod-day",name:"timePeriod",label:"Day",value:c.day,onChange:T,checked:a.timePeriod===c.day}),Object(y.jsx)(U,{id:"timePeriod-week",name:"timePeriod",label:"Week",value:c.week,onChange:T,checked:a.timePeriod===c.week}),Object(y.jsx)(U,{id:"timePeriod-month",name:"timePeriod",label:"Month",value:c.month,onChange:T,checked:a.timePeriod===c.month}),Object(y.jsx)(U,{id:"timePeriod-year",name:"timePeriod",label:"Year",value:c.year,onChange:T,checked:a.timePeriod===c.year}),Object(y.jsx)(U,{id:"timePeriod-all",name:"timePeriod",label:"All",value:c.all,onChange:T,checked:a.timePeriod===c.all})]}),a.mode===n.subreddit&&Object(y.jsxs)("div",{className:"inputs-group",children:[Object(y.jsx)("h2",{className:"title-lg",children:"Sort by"}),Object(y.jsx)(U,{id:"sort-popular",name:"sort",label:"Popular Now",value:r.hot,onChange:I,checked:a.sort===r.hot}),Object(y.jsx)(U,{id:"sort-top",name:"sort",label:"Most Votes",value:r.top,onChange:I,checked:a.sort===r.top}),Object(y.jsx)(U,{id:"sort-new",name:"sort",label:"Most Recent",value:r.new,onChange:I,checked:a.sort===r.new})]}),a.mode!==n.subreddit&&Object(y.jsx)("input",{className:"input-main-search",type:"text",placeholder:a.mode===n.channel?"Insert the channel name":"Insert the category/game name",value:a.value,onChange:_}),Object(y.jsx)("button",{type:"submit",className:"button-generic",onClick:w,disabled:""===a.value&&a.mode!==n.subreddit,children:"Search"}),a.mode!==n.subreddit&&Object(y.jsx)(z,{suggestions:u,localSearch:a})]})]})},J=a.p+"static/media/logo-reddit.569e7461.svg",H=(a(66),a(67),function(e){var t=e.visible;return Object(y.jsx)("div",{className:"loader ".concat(t),children:"Loading..."})}),M=function(){var e=w(),t=Object(b.a)(e,2),a=t[0],n=a.clips,c=a.currentClip,r=a.clipIndex,i=a.currentSearch,o=t[1],l=Object(s.useState)("loading"),d=Object(b.a)(l,2),h=d[0],O=d[1],v=Object(s.useState)(!1),k=Object(b.a)(v,2),N=k[0],S=k[1],C=Object(s.useState)(!1),P=Object(b.a)(C,2),F=P[0],A=P[1],U=Object(j.g)();Object(s.useEffect)((function(){return O("loading"),function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(_(0)),o({type:"SET_CURRENT_SEARCH",payload:U}),e.next=4,L(U);case 4:if(!("error"in(t=e.sent))){e.next=10;break}S(!0),O(""),e.next=18;break;case 10:return o(E(t)),o(T(t.data[0])),e.next=14,x(U);case 14:return e.next=16,f();case 16:a=e.sent,o(R(a));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){o(T({title:"",video_url:"",comments_url:""})),O("loading")}}),[o,U]);var z=Object(s.useCallback)((function(e){var t=n.data,a="prev"===e?r-1:r+1;t[r].video_url===t[a].video_url?z():a<=n.data.length&&(O("loading"),o(T(t[a])),o(_(a)))}),[r,n,o]),D=Object(s.useCallback)(Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.pagination.cursor,console.log("moreclips called"),""===t||F){e.next=9;break}return A(!0),console.log("loading clips"),e.next=7,L(i,t);case 7:"error"in(a=e.sent)?console.log(a.error):(o(I(a)),A(!1));case 9:case"end":return e.stop()}}),e)}))),[n.pagination.cursor,i,o,F]);return Object(s.useEffect)((function(){var e=n.data.length;e>0&&-1===r&&z(),e>0&&r+3>e&&D()}),[n,r,z,D]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"player-container",children:[c.video_url&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"video-controls",children:[Object(y.jsx)("h4",{className:"title-lg",children:c.title}),Object(y.jsxs)("div",{className:"right-container",children:[c.comments_url&&Object(y.jsx)("a",{className:"link-comments",href:"https://reddit.com".concat(c.comments_url),target:"_blank",rel:"noreferrer",title:"clip comments",children:Object(y.jsx)("img",{className:"",width:"25",src:J,alt:"reddit logo"})}),Object(y.jsxs)("button",{className:"btn-clips-control btn-left",onClick:function(){return z("prev")},disabled:r<=0,children:["Previous",Object(y.jsx)("i",{className:"icon-container",children:Object(y.jsx)(g.a,{size:20})})]}),Object(y.jsxs)("button",{className:"btn-clips-control btn-right",onClick:function(){return z()},disabled:n.data.length<=r+1,children:["Next",Object(y.jsx)("i",{className:"icon-container",children:Object(y.jsx)(g.a,{size:20})})]})]})]}),Object(y.jsx)("video",{className:h,src:c.video_url,autoPlay:!0,controls:!0,onEnded:function(){return z()},onLoadedData:function(){return O("")},onError:function(){return z()}})]}),N&&Object(y.jsxs)("div",{className:"error-container",children:[Object(y.jsx)(g.f,{size:48}),Object(y.jsxs)("p",{className:"error-description",children:["We couldn't find any clips for your Search.",Object(y.jsx)("br",{}),"The game/user might not exist or they might not have any clips in the selected period.",Object(y.jsx)("br",{})," Users that are currently suspended also have their clips disabled."]}),Object(y.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]}),Object(y.jsx)(H,{visible:h})]})})},q=(a(68),a(69),function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("h1",{className:"logo-main",children:Object(y.jsxs)(u.b,{to:"/",children:["Clips ",Object(y.jsx)(g.b,{size:36})," Autoplay"]})})})}),V=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(F,{}),Object(y.jsxs)("main",{className:"main-content",children:[Object(y.jsx)(q,{}),Object(y.jsxs)(j.c,{children:[Object(y.jsx)(j.a,{path:"/:mode/:timePeriod/:value?",children:Object(y.jsx)(M,{})}),Object(y.jsx)(j.a,{path:"/",children:Object(y.jsx)(D,{})})]})]})]})};d.a.initialize("UA-200630534-1"),d.a.pageview(window.location.pathname+window.location.search),l.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(C,{reducer:function(e,t){switch(t.type){case"SET_CLIPS":return Object(P.a)(Object(P.a)({},e),{},{clips:Object(P.a)({},t.payload)});case"SET_CURRENT_CLIP":return Object(P.a)(Object(P.a)({},e),{},{currentClip:Object(P.a)({},t.payload)});case"SET_CLIP_INDEX":return Object(P.a)(Object(P.a)({},e),{},{clipIndex:t.payload});case"UPDATE_CLIPS":var a=e.clips.data.concat(t.payload.data);return Object(P.a)(Object(P.a)({},e),{},{clips:{data:a,pagination:{cursor:t.payload.pagination.cursor}}});case"SET_CURRENT_SEARCH":return Object(P.a)(Object(P.a)({},e),{},{currentSearch:t.payload});case"SET_FAVOURITES":return Object(P.a)(Object(P.a)({},e),{},{favourites:t.payload});default:return e}},children:Object(y.jsx)(u.a,{children:Object(y.jsx)(V,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.33f6b78a.chunk.js.map