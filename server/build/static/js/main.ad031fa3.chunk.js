(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var c,n,r,s=a(0),i=a.n(s),o=a(31),l=a.n(o),u=a(6),d=a(2),j=a(5),b=a(4),h=a.n(b),m=a(10),p=a(14),O=a.n(p);!function(e){e.channel="channel",e.category="category",e.subreddit="subreddit"}(c||(c={})),function(e){e.day="day",e.week="week",e.month="month",e.year="year",e.all="all"}(n||(n={})),function(e){e.new="new",e.top="top",e.hot="hot"}(r||(r={}));var f=function(){return JSON.parse(localStorage.getItem("favourites")||"[]").sort((function(e,t){return e.rank<t.rank?1:-1})).slice(0,15)},v=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,r,s,i,o,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.value||t.mode===c.subreddit){e.next=17;break}if(a=JSON.parse(localStorage.getItem("favourites")||"[]"),!((n=a.findIndex((function(e){return e.search.value===t.value&&e.search.mode===t.mode})))>=0)){e.next=8;break}(r=a)[n].rank=r[n].rank+1,e.next=16;break;case 8:return i="".concat("https://clips-autoplay.herokuapp.com","/api/twitch/suggestions/").concat(t.mode,"/").concat(t.value),e.next=11,O.a.get(i);case 11:o=e.sent,l=o.data,u="",(null===(s=l[0])||void 0===s?void 0:s.avatar)&&(u=l[0].avatar),r=a.concat({search:t,rank:0,avatar:u});case 16:localStorage.setItem("favourites",JSON.stringify(r));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(a(55),a(12)),g=(a(56),a(1)),y=function(e){var t=e.src,a=e.name,c=null===t||void 0===t?void 0:t.replace("{width}","50").replace("{height}","67").replace("300x300","50x50"),n="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png";return Object(g.jsxs)("div",{className:"channel-avatar-container",children:[Object(g.jsx)("img",{className:"channel-avatar",width:30,src:void 0!==c&&""!==c?c:n,alt:"".concat(a," avatar"),onError:function(e){return function(e){e.target.src=n}(e)}}),a]})},k={clips:{data:[],pagination:{cursor:""}},currentClip:{title:"",video_url:"",comments_url:""},clipIndex:-1,currentSearch:{mode:c.channel,value:"",timePeriod:n.all,sort:r.hot},favourites:[]},N=Object(s.createContext)([k,function(){return k}]),w=function(e){var t=e.reducer,a=e.children,c=Object(s.useReducer)(t,k),n=Object(j.a)(c,2),r=n[0],i=n[1];return Object(g.jsx)(N.Provider,{value:[r,i],children:a})},S=function(){return Object(s.useContext)(N)},C=a(3),P=function(e){return{type:"SET_CLIPS",payload:e}},E=function(e){return{type:"SET_CURRENT_CLIP",payload:e}},_=function(e){return{type:"SET_CLIP_INDEX",payload:e}},T=function(e){return{type:"UPDATE_CLIPS",payload:e}},I=function(e){return{type:"SET_FAVOURITES",payload:e}},R=function(){var e=S(),t=Object(j.a)(e,2),a=t[0].favourites,c=t[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],d=Object(s.useCallback)((function(){var e=f();c(I(e))}),[c]);Object(s.useEffect)((function(){d()}),[d]);var b=function(e){var t;o||!0!==e?(l(!1),null===(t=document.querySelector(".favourites-bar"))||void 0===t||t.scrollTo({top:0}),document.body.style.overflow="unset"):(l(!0),document.body.style.overflow="hidden")},h=function(e){!function(e){var t=JSON.parse(localStorage.getItem("favourites")||"[]").filter((function(t){return t.search.value!==e.value||t.search.mode!==e.mode}));localStorage.setItem("favourites",JSON.stringify(t))}(e),d()};return Object(g.jsx)(g.Fragment,{children:a&&Object(g.jsx)("aside",{className:"favourites-bar ".concat(!0===o?"is-visible":""),children:Object(g.jsxs)("div",{className:"favourites-container",children:[Object(g.jsx)("h5",{className:"title-lg",children:Object(g.jsxs)(u.b,{to:"/",title:"Homepage",onClick:function(){return b()},children:[Object(g.jsx)(x.d,{size:30,className:"sidebar-icon"}),Object(g.jsx)("span",{className:"title-text",children:"Homepage"})]})}),Object(g.jsxs)("button",{className:"title-lg",onClick:function(){return b(!0)},children:[Object(g.jsx)(x.c,{size:30,className:"sidebar-icon"}),Object(g.jsxs)("span",{className:"title-text",children:["Your",Object(g.jsx)("br",{})," Favourites"]})]}),a.length>0?Object(g.jsx)("ul",{className:"favourites-list",children:a.map((function(e){var t=e.search,a=e.avatar;return Object(g.jsxs)("li",{className:"favourites-item",children:[Object(g.jsx)(u.b,{to:"/".concat(t.mode,"/").concat(n.day,"/").concat(t.value),onClick:function(){return b()},children:Object(g.jsx)(y,{src:a,name:t.value})}),Object(g.jsx)("button",{title:"Remove Favourite",onClick:function(){return h(t)},children:Object(g.jsx)(x.e,{size:14})})]},t.value)}))}):Object(g.jsx)("p",{className:"favourites-empty",children:"After you seach for clips your favorites will show up here"})]})})})},F=function(){var e=Object(m.a)(h.a.mark((function e(t,a){var n,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mode===c.subreddit?"".concat("https://clips-autoplay.herokuapp.com","/api/").concat(t.mode,"/livestreamfail?timeperiod=").concat(t.timePeriod,"&sort=").concat(t.value):"".concat("https://clips-autoplay.herokuapp.com","/api/twitch/").concat(t.mode,"/").concat(t.value,"?timeperiod=").concat(t.timePeriod),a&&(n="".concat(n,"&after=").concat(a)),e.prev=2,e.next=5,O.a.get(n);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(2),i=e.t0.response,e.abrupt("return",{error:{status:i.status,message:i.statusText}});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(h.a.mark((function e(t,a){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===c.subreddit){e.next=10;break}return n="".concat("https://clips-autoplay.herokuapp.com","/api/twitch/suggestions/").concat(t,"/"),a&&(n="".concat(n).concat(a)),e.next=5,O.a.get(n);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=(a(63),function(e){var t=e.id,a=e.name,c=e.label,n=e.checked,r=e.value,s=e.onChange;return Object(g.jsxs)("div",{className:"radio-custom",children:[Object(g.jsx)("input",{id:t,type:"radio",name:a,checked:n,value:r,onChange:s}),Object(g.jsx)("label",{htmlFor:t,children:c})]})}),U=(a(64),a(30),a(65),function(e){var t=e.suggestions,a=e.localSearch;return Object(g.jsxs)("section",{className:"suggestions-container",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Suggestions"}),t.length>0?Object(g.jsx)("ul",{className:"suggestions-list",children:a.mode&&Object(g.jsx)(g.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.avatar,c=e.name;return Object(g.jsx)("li",{className:"suggestions-item",children:Object(g.jsx)(u.b,{to:"/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(c),children:Object(g.jsx)(y,{src:t,name:c})})},c)}))})}):Object(g.jsx)("p",{className:"no-suggestions",children:"No suggestions found but you can still search using the button since not every user is in our database."})]})}),z=function(){var e=Object(s.useState)({mode:c.channel,value:"",timePeriod:n.week,sort:r.hot}),t=Object(j.a)(e,2),a=t[0],i=t[1],o=Object(s.useState)([]),l=Object(j.a)(o,2),u=l[0],b=l[1],p=Object(s.useState)([]),O=Object(j.a)(p,2),f=O[0],v=O[1],x=Object(s.useState)([]),y=Object(j.a)(x,2),k=y[0],N=y[1],w=Object(d.f)(),S=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.value.length>0&&a.mode!==c.subreddit)){e.next=7;break}return e.next=3,L(a.mode,a.value);case 3:(t=e.sent)&&b(t),e.next=25;break;case 7:if(a.mode!==c.channel){e.next=16;break}if(!(f.length>0)){e.next=12;break}b(f),e.next=16;break;case 12:return e.next=14,L(a.mode);case 14:(n=e.sent).length>0&&(b(n),v(n));case 16:if(a.mode!==c.category){e.next=25;break}if(!(k.length>0)){e.next=21;break}b(k),e.next=25;break;case 21:return e.next=23,L(a.mode);case 23:(r=e.sent).length>0&&(b(r),N(r));case 25:case"end":return e.stop()}}),e)}))),[k,f,a.mode,a.value]);Object(s.useEffect)((function(){S()}),[S]);var P=function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.value,a.mode===c.subreddit&&(n=a.sort),w.push("/".concat(a.mode,"/").concat(a.timePeriod,"/").concat(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{mode:t}))},_=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{timePeriod:t}))},T=function(){var e=Object(m.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.currentTarget.value,i(Object(C.a)(Object(C.a)({},a),{},{value:c.replace("/","")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},a),{},{sort:t}))};return Object(g.jsxs)("div",{className:"search-container",children:[Object(g.jsx)("h2",{className:"text-intro",children:"Watch the best Twitch Clips from your favourite content creators without interruptions"}),Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Search Clips by"}),Object(g.jsx)(A,{id:"searchType-channel",name:"search-type",label:"Channel",value:c.channel,onChange:E,checked:a.mode===c.channel}),Object(g.jsx)(A,{id:"searchType-category",name:"search-type",label:"Category/Game",value:c.category,onChange:E,checked:a.mode===c.category}),Object(g.jsx)(A,{id:"searchType-lsf",name:"search-type",label:"LiveStreamFail",value:c.subreddit,onChange:E,checked:a.mode===c.subreddit})]}),a.mode===c.subreddit&&Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Sort by"}),Object(g.jsx)(A,{id:"sort-popular",name:"sort",label:"Popular Now",value:r.hot,onChange:I,checked:a.sort===r.hot}),Object(g.jsx)(A,{id:"sort-top",name:"sort",label:"Most Votes",value:r.top,onChange:I,checked:a.sort===r.top}),Object(g.jsx)(A,{id:"sort-new",name:"sort",label:"Most Recent",value:r.new,onChange:I,checked:a.sort===r.new})]}),a.mode!==c.subreddit||a.mode===c.subreddit&&a.sort===r.top?Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Filter by"}),Object(g.jsx)(A,{id:"timePeriod-day",name:"timePeriod",label:"Day",value:n.day,onChange:_,checked:a.timePeriod===n.day}),Object(g.jsx)(A,{id:"timePeriod-week",name:"timePeriod",label:"Week",value:n.week,onChange:_,checked:a.timePeriod===n.week}),Object(g.jsx)(A,{id:"timePeriod-month",name:"timePeriod",label:"Month",value:n.month,onChange:_,checked:a.timePeriod===n.month}),Object(g.jsx)(A,{id:"timePeriod-year",name:"timePeriod",label:"Year",value:n.year,onChange:_,checked:a.timePeriod===n.year}),Object(g.jsx)(A,{id:"timePeriod-all",name:"timePeriod",label:"All",value:n.all,onChange:_,checked:a.timePeriod===n.all})]}):null,a.mode!==c.subreddit&&Object(g.jsx)("input",{className:"input-main-search",type:"text",placeholder:a.mode===c.channel?"Insert the channel name":"Insert the category/game name",value:a.value,onChange:T}),Object(g.jsx)("button",{type:"submit",className:"button-generic",onClick:P,disabled:""===a.value&&a.mode!==c.subreddit,children:"Search"}),a.mode!==c.subreddit&&Object(g.jsx)(U,{suggestions:u,localSearch:a})]})]})},D=a.p+"static/media/logo-reddit.569e7461.svg",J=a(13),H=(a(66),a(67),function(e){var t=e.visible;return Object(g.jsx)("div",{className:"loader ".concat(t),children:"Loading..."})}),M=function(){return Object(g.jsxs)("div",{className:"error-container",children:[Object(g.jsx)(x.f,{size:48}),Object(g.jsxs)("p",{className:"error-description",children:["We couldn't find any clips for your Search.",Object(g.jsx)("br",{}),"The game/user might not exist or they might not have any clips in the selected period.",Object(g.jsx)("br",{})," Users that are currently suspended also have their clips disabled."]}),Object(g.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]})},V=function(){return Object(g.jsxs)("div",{className:"error-container",children:[Object(g.jsx)("p",{className:"error-description",children:"You have reached the final clip for the current search"}),Object(g.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]})},W=function(){var e=S(),t=Object(j.a)(e,2),a=t[0],c=a.clips,n=a.currentClip,r=a.clipIndex,i=a.currentSearch,o=t[1],l=Object(s.useState)("loading"),u=Object(j.a)(l,2),b=u[0],p=u[1],O=Object(s.useState)(!1),y=Object(j.a)(O,2),k=y[0],N=y[1],w=Object(s.useState)(!1),C=Object(j.a)(w,2),R=C[0],L=C[1],A=Object(s.useState)(!1),U=Object(j.a)(A,2),z=U[0],W=U[1],Y=Object(d.g)();Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[Y]),Object(s.useEffect)((function(){return p("loading"),function(){var e=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(_(0)),o({type:"SET_CURRENT_SEARCH",payload:Y}),e.next=4,F(Y);case 4:if(!("error"in(t=e.sent))){e.next=10;break}N(!0),p(""),e.next=19;break;case 10:return o(P(t)),o(E(t.data[0])),L(!1),e.next=15,v(Y);case 15:return e.next=17,f();case 17:a=e.sent,o(I(a));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){o(E({title:"",video_url:"",comments_url:""})),p("loading")}}),[o,Y]);var X=Object(s.useCallback)((function(e){var t=c.data,a="prev"===e?r-1:r+1;a+1<=c.data.length?t[r].video_url===t[a].video_url?X():(p("loading"),o(E(t[a])),o(_(a))):(L(!0),p(""))}),[r,c,o]),q=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.pagination.cursor,console.log("moreclips called"),""===t||z){e.next=9;break}return W(!0),console.log("loading clips"),e.next=7,F(i,t);case 7:"error"in(a=e.sent)?console.log(a.error):(o(T(a)),W(!1));case 9:case"end":return e.stop()}}),e)}))),[c.pagination.cursor,i,o,z]);return Object(s.useEffect)((function(){var e=c.data.length;e>0&&-1===r&&X(),e>0&&r+3>e&&q()}),[c,r,X,q]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"player-container",children:[R&&Object(g.jsx)(V,{}),n.video_url&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"video-controls",children:[Object(g.jsx)("h4",{className:"title-lg",children:n.title}),Object(g.jsxs)("div",{className:"right-container",children:[n.comments_url&&Object(g.jsx)("a",{className:"link-comments",href:"https://reddit.com".concat(n.comments_url),target:"_blank",rel:"noreferrer",title:"clip comments",children:Object(g.jsx)("img",{className:"",width:"25",src:D,alt:"reddit logo"})}),Object(g.jsxs)("button",{className:"btn-clips-control btn-left",onClick:function(){return X("prev")},disabled:r<=0,children:["Previous",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]}),Object(g.jsxs)("button",{className:"btn-clips-control btn-right",onClick:function(){return X()},disabled:c.data.length<=r+1,children:["Next",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]})]})]}),Object(g.jsx)("video",{className:b,src:n.video_url,autoPlay:!0,controls:!0,onEnded:function(){return X()},onLoadedData:function(){return p("")},onError:function(){return X()}})]}),k&&Object(g.jsx)(M,{}),Object(g.jsx)(H,{visible:b})]})})},Y=(a(68),a(69),function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("h1",{className:"logo-main",children:Object(g.jsxs)(u.b,{to:"/",children:["Clips ",Object(g.jsx)(x.b,{size:36})," Autoplay"]})})})}),X=a(7);J.a.initialize("UA-200630534-1"),Object(X.a)().listen((function(e,t){J.a.pageview(e.pathname+e.search)}));var q=function(){return Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R,{}),Object(g.jsxs)("main",{className:"main-content",children:[Object(g.jsx)(Y,{}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.a,{path:"/:mode/:timePeriod/:value?",children:Object(g.jsx)(W,{})}),Object(g.jsx)(d.a,{path:"/",children:Object(g.jsx)(z,{})})]})]})]})};a(70).config(),l.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(w,{reducer:function(e,t){switch(t.type){case"SET_CLIPS":return Object(C.a)(Object(C.a)({},e),{},{clips:Object(C.a)({},t.payload)});case"SET_CURRENT_CLIP":return Object(C.a)(Object(C.a)({},e),{},{currentClip:Object(C.a)({},t.payload)});case"SET_CLIP_INDEX":return Object(C.a)(Object(C.a)({},e),{},{clipIndex:t.payload});case"UPDATE_CLIPS":var a=e.clips.data.concat(t.payload.data);return Object(C.a)(Object(C.a)({},e),{},{clips:{data:a,pagination:{cursor:t.payload.pagination.cursor}}});case"SET_CURRENT_SEARCH":return Object(C.a)(Object(C.a)({},e),{},{currentSearch:t.payload});case"SET_FAVOURITES":return Object(C.a)(Object(C.a)({},e),{},{favourites:t.payload});default:return e}},children:Object(g.jsx)(u.a,{children:Object(g.jsx)(q,{})})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.ad031fa3.chunk.js.map