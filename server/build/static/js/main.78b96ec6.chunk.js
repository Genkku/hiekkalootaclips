(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var a,n,r,s=c(0),i=c.n(s),o=c(31),l=c.n(o),u=c(6),d=c(2),j=c(5),b=c(4),h=c.n(b),m=c(11),p=c(14),O=c.n(p);!function(e){e.channel="channel",e.category="category",e.subreddit="subreddit"}(a||(a={})),function(e){e.day="day",e.week="week",e.month="month",e.year="year",e.all="all"}(n||(n={})),function(e){e.new="new",e.top="top",e.hot="hot"}(r||(r={}));var f=function(){return JSON.parse(localStorage.getItem("favourites")||"[]").sort((function(e,t){return e.rank<t.rank?1:-1})).slice(0,15)},v=function(){var e=Object(m.a)(h.a.mark((function e(t){var c,n,r,s,i,o,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.value||t.mode===a.subreddit){e.next=17;break}if(c=JSON.parse(localStorage.getItem("favourites")||"[]"),!((n=c.findIndex((function(e){return e.search.value===t.value&&e.search.mode===t.mode})))>=0)){e.next=8;break}(r=c)[n].rank=r[n].rank+1,e.next=16;break;case 8:return i="".concat("https://clips-autoplay.herokuapp.com","/api/twitch/suggestions/").concat(t.mode,"/").concat(t.value),e.next=11,O.a.get(i);case 11:o=e.sent,l=o.data,u="",(null===(s=l[0])||void 0===s?void 0:s.avatar)&&(u=l[0].avatar),r=c.concat({search:t,rank:0,avatar:u});case 16:localStorage.setItem("favourites",JSON.stringify(r));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(c(55),c(9)),g=(c(56),c(1)),y=function(e){var t=e.src,c=e.name,a=null===t||void 0===t?void 0:t.replace("{width}","50").replace("{height}","67").replace("300x300","50x50"),n="https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png";return Object(g.jsxs)("div",{className:"channel-avatar-container",children:[Object(g.jsx)("img",{className:"channel-avatar",width:30,src:void 0!==a&&""!==a?a:n,alt:"".concat(c," avatar"),onError:function(e){return function(e){e.target.src=n}(e)}}),c]})},w={clips:{data:[],pagination:{cursor:""}},currentClip:{title:"",video_url:"",comments_url:"",twitch_url:""},clipIndex:-1,currentSearch:{mode:a.channel,value:"",timePeriod:n.all,sort:r.hot},favourites:[]},k=Object(s.createContext)([w,function(){return w}]),N=function(e){var t=e.reducer,c=e.children,a=Object(s.useReducer)(t,w),n=Object(j.a)(a,2),r=n[0],i=n[1];return Object(g.jsx)(k.Provider,{value:[r,i],children:c})},S=function(){return Object(s.useContext)(k)},C=c(3),P=function(e){return{type:"SET_CLIPS",payload:e}},_=function(e){return{type:"SET_CURRENT_CLIP",payload:e}},E=function(e){return{type:"SET_CLIP_INDEX",payload:e}},T=function(e){return{type:"UPDATE_CLIPS",payload:e}},I=function(e){return{type:"SET_FAVOURITES",payload:e}},R=function(){var e=S(),t=Object(j.a)(e,2),c=t[0].favourites,a=t[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],d=Object(s.useCallback)((function(){var e=f();a(I(e))}),[a]);Object(s.useEffect)((function(){d()}),[d]);var b=function(e){var t;o||!0!==e?(l(!1),null===(t=document.querySelector(".favourites-bar"))||void 0===t||t.scrollTo({top:0}),document.body.style.overflow="unset"):(l(!0),document.body.style.overflow="hidden")},h=function(e){!function(e){var t=JSON.parse(localStorage.getItem("favourites")||"[]").filter((function(t){return t.search.value!==e.value||t.search.mode!==e.mode}));localStorage.setItem("favourites",JSON.stringify(t))}(e),d()};return Object(g.jsx)(g.Fragment,{children:c&&Object(g.jsx)("aside",{className:"favourites-bar ".concat(!0===o?"is-visible":""),children:Object(g.jsxs)("div",{className:"favourites-container",children:[Object(g.jsx)("h5",{className:"title-lg",children:Object(g.jsxs)(u.b,{to:"/",title:"Homepage",onClick:function(){return b()},children:[Object(g.jsx)(x.e,{size:30,className:"sidebar-icon"}),Object(g.jsx)("span",{className:"title-text",children:"Homepage"})]})}),Object(g.jsxs)("button",{className:"title-lg",onClick:function(){return b(!0)},children:[Object(g.jsx)(x.d,{size:30,className:"sidebar-icon"}),Object(g.jsxs)("span",{className:"title-text",children:["Your",Object(g.jsx)("br",{})," Favourites"]})]}),c.length>0?Object(g.jsx)("ul",{className:"favourites-list",children:c.map((function(e){var t=e.search,c=e.avatar;return Object(g.jsxs)("li",{className:"favourites-item",children:[Object(g.jsx)(u.b,{to:"/".concat(t.mode,"/").concat(n.day,"/").concat(t.value),onClick:function(){return b()},children:Object(g.jsx)(y,{src:c,name:t.value})}),Object(g.jsx)("button",{title:"Remove Favourite",onClick:function(){return h(t)},children:Object(g.jsx)(x.g,{size:14})})]},t.value)}))}):Object(g.jsx)("p",{className:"favourites-empty",children:"After you seach for clips your favorites will show up here"})]})})})},A=function(){var e=Object(m.a)(h.a.mark((function e(t,c){var n,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mode===a.subreddit?"".concat("https://clips-autoplay.herokuapp.com","/api/").concat(t.mode,"/livestreamfail?timeperiod=").concat(t.timePeriod,"&sort=").concat(t.value):"".concat("https://clips-autoplay.herokuapp.com","/api/twitch/").concat(t.mode,"/").concat(t.value,"?timeperiod=").concat(t.timePeriod),c&&(n="".concat(n,"&after=").concat(c)),e.prev=2,e.next=5,O.a.get(n);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(2),i=e.t0.response,e.abrupt("return",{error:{status:i.status,message:i.statusText}});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,c){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(h.a.mark((function e(t,c){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a.subreddit){e.next=10;break}return n="".concat("https://clips-autoplay.herokuapp.com","/api/twitch/suggestions/").concat(t,"/"),c&&(n="".concat(n).concat(c)),e.next=5,O.a.get(n);case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),L=(c(63),function(e){var t=e.id,c=e.name,a=e.label,n=e.checked,r=e.value,s=e.onChange;return Object(g.jsxs)("div",{className:"radio-custom",children:[Object(g.jsx)("input",{id:t,type:"radio",name:c,checked:n,value:r,onChange:s}),Object(g.jsx)("label",{htmlFor:t,children:a})]})}),z=(c(64),c(30),c(65),function(e){var t=e.suggestions,c=e.localSearch;return Object(g.jsxs)("section",{className:"suggestions-container",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Suggestions"}),t.length>0?Object(g.jsx)("ul",{className:"suggestions-list",children:c.mode&&Object(g.jsx)(g.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.avatar,a=e.name;return Object(g.jsx)("li",{className:"suggestions-item",children:Object(g.jsx)(u.b,{to:"/".concat(c.mode,"/").concat(c.timePeriod,"/").concat(a),children:Object(g.jsx)(y,{src:t,name:a})})},a)}))})}):Object(g.jsx)("p",{className:"no-suggestions",children:"No suggestions found but you can still search using the button since not every user is in our database."})]})}),U=function(){var e=Object(s.useState)({mode:a.channel,value:"",timePeriod:n.week,sort:r.hot}),t=Object(j.a)(e,2),c=t[0],i=t[1],o=Object(s.useState)([]),l=Object(j.a)(o,2),u=l[0],b=l[1],p=Object(s.useState)([]),O=Object(j.a)(p,2),f=O[0],v=O[1],x=Object(s.useState)([]),y=Object(j.a)(x,2),w=y[0],k=y[1],N=Object(d.f)(),S=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.value.length>0&&c.mode!==a.subreddit)){e.next=7;break}return e.next=3,F(c.mode,c.value);case 3:(t=e.sent)&&b(t),e.next=25;break;case 7:if(c.mode!==a.channel){e.next=16;break}if(!(f.length>0)){e.next=12;break}b(f),e.next=16;break;case 12:return e.next=14,F(c.mode);case 14:(n=e.sent).length>0&&(b(n),v(n));case 16:if(c.mode!==a.category){e.next=25;break}if(!(w.length>0)){e.next=21;break}b(w),e.next=25;break;case 21:return e.next=23,F(c.mode);case 23:(r=e.sent).length>0&&(b(r),k(r));case 25:case"end":return e.stop()}}),e)}))),[w,f,c.mode,c.value]);Object(s.useEffect)((function(){S()}),[S]);var P=function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=c.value,c.mode===a.subreddit&&(n=c.sort),N.push("/".concat(c.mode,"/").concat(c.timePeriod,"/").concat(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},c),{},{mode:t}))},E=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},c),{},{timePeriod:t}))},T=function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.value,i(Object(C.a)(Object(C.a)({},c),{},{value:a.replace("/","")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.currentTarget.value;i(Object(C.a)(Object(C.a)({},c),{},{sort:t}))};return Object(g.jsxs)("div",{className:"search-container",children:[Object(g.jsx)("h2",{className:"text-intro",children:"Watch the best Twitch Clips from your favourite content creators without interruptions"}),Object(g.jsxs)("form",{children:[Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Search Clips by"}),Object(g.jsx)(L,{id:"searchType-channel",name:"search-type",label:"Channel",value:a.channel,onChange:_,checked:c.mode===a.channel}),Object(g.jsx)(L,{id:"searchType-category",name:"search-type",label:"Category/Game",value:a.category,onChange:_,checked:c.mode===a.category}),Object(g.jsx)(L,{id:"searchType-lsf",name:"search-type",label:"LiveStreamFail",value:a.subreddit,onChange:_,checked:c.mode===a.subreddit})]}),c.mode===a.subreddit&&Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Sort by"}),Object(g.jsx)(L,{id:"sort-popular",name:"sort",label:"Popular Now",value:r.hot,onChange:I,checked:c.sort===r.hot}),Object(g.jsx)(L,{id:"sort-top",name:"sort",label:"Most Votes",value:r.top,onChange:I,checked:c.sort===r.top}),Object(g.jsx)(L,{id:"sort-new",name:"sort",label:"Most Recent",value:r.new,onChange:I,checked:c.sort===r.new})]}),c.mode!==a.subreddit||c.mode===a.subreddit&&c.sort===r.top?Object(g.jsxs)("div",{className:"inputs-group",children:[Object(g.jsx)("h2",{className:"title-lg",children:"Filter by"}),Object(g.jsx)(L,{id:"timePeriod-day",name:"timePeriod",label:"Day",value:n.day,onChange:E,checked:c.timePeriod===n.day}),Object(g.jsx)(L,{id:"timePeriod-week",name:"timePeriod",label:"Week",value:n.week,onChange:E,checked:c.timePeriod===n.week}),Object(g.jsx)(L,{id:"timePeriod-month",name:"timePeriod",label:"Month",value:n.month,onChange:E,checked:c.timePeriod===n.month}),Object(g.jsx)(L,{id:"timePeriod-year",name:"timePeriod",label:"Year",value:n.year,onChange:E,checked:c.timePeriod===n.year}),Object(g.jsx)(L,{id:"timePeriod-all",name:"timePeriod",label:"All",value:n.all,onChange:E,checked:c.timePeriod===n.all})]}):null,c.mode!==a.subreddit&&Object(g.jsx)("input",{className:"input-main-search",type:"text",placeholder:c.mode===a.channel?"Insert the channel name":"Insert the category/game name",value:c.value,onChange:T}),Object(g.jsx)("button",{type:"submit",className:"button-generic",onClick:P,disabled:""===c.value&&c.mode!==a.subreddit,children:"Search"}),c.mode!==a.subreddit&&Object(g.jsx)(z,{suggestions:u,localSearch:c})]})]})},D=c.p+"static/media/logo-twitch.ad99d699.svg",J=c(13),H=(c(66),c(67),function(e){var t=e.visible;return Object(g.jsx)("div",{className:"loader ".concat(t),children:"Loading..."})}),W=function(){return Object(g.jsxs)("div",{className:"error-container",children:[Object(g.jsx)(x.h,{size:48}),Object(g.jsxs)("p",{className:"error-description",children:["We couldn't find any clips for your Search.",Object(g.jsx)("br",{}),"The game/user might not exist or they might not have any clips in the selected period.",Object(g.jsx)("br",{})," Users that are currently suspended also have their clips disabled."]}),Object(g.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]})},M=function(){return Object(g.jsxs)("div",{className:"error-container",children:[Object(g.jsx)("p",{className:"error-description",children:"You have reached the final clip for the current search"}),Object(g.jsx)(u.b,{to:"/",className:"button-generic",children:"New Search"})]})},V=function(e){var t,c=e.currentClip;return Object(g.jsxs)("div",{className:"comments-box",children:[Object(g.jsx)("div",{className:"comments-container",children:null===(t=c.comments)||void 0===t?void 0:t.map((function(e,t){var c=e.comment,a=e.author;return Object(g.jsxs)("div",{className:"comments-item",children:[Object(g.jsx)("span",{className:"comment-author",children:"/u/".concat(a)}),Object(g.jsx)("p",{children:c})]},t)}))}),c.comments_url&&Object(g.jsx)("a",{className:"link-comments",href:"https://reddit.com".concat(c.comments_url),target:"_blank",rel:"noreferrer",title:"clip comments",children:"See All Comments"})]})},Y=function(){var e=S(),t=Object(j.a)(e,2),c=t[0],a=c.clips,n=c.currentClip,r=c.clipIndex,i=c.currentSearch,o=t[1],l=Object(s.useState)("loading"),u=Object(j.a)(l,2),b=u[0],p=u[1],O=Object(s.useState)(!1),y=Object(j.a)(O,2),w=y[0],k=y[1],N=Object(s.useState)(!1),C=Object(j.a)(N,2),R=C[0],F=C[1],L=Object(s.useState)(1200),z=Object(j.a)(L,2),U=z[0],Y=z[1],q=Object(s.useState)(!1),X=Object(j.a)(q,2),B=X[0],G=X[1],K=Object(s.useState)(!0),Q=Object(j.a)(K,2),Z=Q[0],$=Q[1],ee=Object(s.useState)(!1),te=Object(j.a)(ee,2),ce=te[0],ae=te[1],ne=Object(d.g)();Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[ne]),Object(s.useEffect)((function(){return p("loading"),function(){var e=Object(m.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(E(0)),o({type:"SET_CURRENT_SEARCH",payload:ne}),e.next=4,A(ne);case 4:if(!("error"in(t=e.sent))){e.next=10;break}k(!0),p(""),e.next=19;break;case 10:return o(P(t)),o(_(t.data[0])),F(!1),e.next=15,v(ne);case 15:return e.next=17,f();case 17:c=e.sent,o(I(c));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){o(_({title:"",video_url:"",twitch_url:"",comments_url:""})),p("loading")}}),[o,ne]);var re=Object(s.useCallback)((function(e){var t=a.data,c="prev"===e?r-1:r+1;if("prev"===e&&r<=0)return!1;c+1<=a.data.length?t[r].video_url===t[c].video_url?re():(p("loading"),F(!1),o(_(t[c])),o(E(c))):(F(!0),p(""))}),[r,a,o]),se=Object(s.useCallback)(Object(m.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(t=a.pagination.cursor)||B){e.next=7;break}return G(!0),e.next=5,A(i,t);case 5:"error"in(c=e.sent)?console.log(c.error):(o(T(c)),G(!1));case 7:case"end":return e.stop()}}),e)}))),[a.pagination.cursor,i,o,B]);return Object(s.useEffect)((function(){var e=a.data.length;e>0&&-1===r&&re(),e>0&&r+3>e&&se()}),[a,r,re,se]),Object(s.useEffect)((function(){var e=function(){var e=document.querySelector(".player-container video"),t=window.innerHeight,c=window.innerWidth;e&&c>1e3&&Y(1.69*(t-200))};e(),window.onresize=e,window.onkeydown=function(e){"ArrowLeft"===e.key&&re("prev"),"ArrowRight"===e.key&&re()}}),[re]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"player-container ".concat(Z&&n.comments?"has-comments":""," ").concat(ce?"is-fullscreen":""),style:{maxWidth:U},children:[R&&Object(g.jsx)(M,{}),n.video_url&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"video-controls",children:[Object(g.jsx)("h4",{className:"title-lg",children:n.title}),Object(g.jsxs)("div",{className:"right-container",children:[n.twitch_url&&Object(g.jsx)("a",{className:"link-twitch",href:"".concat(n.twitch_url),target:"_blank",rel:"noreferrer",title:"clip twitch page",children:Object(g.jsx)("img",{className:"",width:"25",src:D,alt:"twitch logo"})}),Object(g.jsx)("button",{className:"toggle-fullscreen",title:"toggle fullscreen",onClick:function(){return ae(!ce)},children:Object(g.jsx)(x.f,{size:20})}),n.comments&&Object(g.jsx)("button",{className:"toggle-comments",title:"toggle comments",onClick:function(){return $(!Z)},children:Object(g.jsx)(x.b,{size:20})}),Object(g.jsxs)("button",{className:"btn-clips-control btn-left",onClick:function(){return re("prev")},disabled:r<=0,children:["Previous",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]}),Object(g.jsxs)("button",{className:"btn-clips-control btn-right",onClick:function(){return re()},disabled:a.data.length<=r+1,children:["Next",Object(g.jsx)("i",{className:"icon-container",children:Object(g.jsx)(x.a,{size:20})})]})]})]}),Object(g.jsxs)("div",{className:"video-comments-wrapper",children:[Object(g.jsx)("video",{className:b,src:n.video_url,autoPlay:!0,controls:!0,onEnded:function(){return re()},onLoadedData:function(){return p("")},onError:function(){return re()}}),n.comments&&"loading"!==b?Object(g.jsx)(V,{currentClip:n}):null]})]}),w&&Object(g.jsx)(W,{}),Object(g.jsx)(H,{visible:b})]})})},q=(c(68),c(69),function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("h1",{className:"logo-main",children:Object(g.jsxs)(u.b,{to:"/",children:["Clips ",Object(g.jsx)(x.c,{size:36})," Autoplay"]})})})}),X=c(7);J.a.initialize("UA-200630534-1"),Object(X.a)().listen((function(e,t){J.a.pageview(e.pathname+e.search)}));var B=function(){return Object(s.useEffect)((function(){J.a.pageview(window.location.pathname+window.location.search)}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R,{}),Object(g.jsxs)("main",{className:"main-content",children:[Object(g.jsx)(q,{}),Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.a,{path:"/:mode/:timePeriod/:value?",children:Object(g.jsx)(Y,{})}),Object(g.jsx)(d.a,{path:"/",children:Object(g.jsx)(U,{})})]})]})]})};c(70).config(),l.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(N,{reducer:function(e,t){switch(t.type){case"SET_CLIPS":return Object(C.a)(Object(C.a)({},e),{},{clips:Object(C.a)({},t.payload)});case"SET_CURRENT_CLIP":return Object(C.a)(Object(C.a)({},e),{},{currentClip:Object(C.a)({},t.payload)});case"SET_CLIP_INDEX":return Object(C.a)(Object(C.a)({},e),{},{clipIndex:t.payload});case"UPDATE_CLIPS":var c=e.clips.data.concat(t.payload.data);return Object(C.a)(Object(C.a)({},e),{},{clips:{data:c,pagination:{cursor:t.payload.pagination.cursor}}});case"SET_CURRENT_SEARCH":return Object(C.a)(Object(C.a)({},e),{},{currentSearch:t.payload});case"SET_FAVOURITES":return Object(C.a)(Object(C.a)({},e),{},{favourites:t.payload});default:return e}},children:Object(g.jsx)(u.a,{children:Object(g.jsx)(B,{})})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.78b96ec6.chunk.js.map